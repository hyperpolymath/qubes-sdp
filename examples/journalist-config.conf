# Qubes SDP Configuration - Journalist Preset
# Optimized for investigative journalism and source protection

# Use journalist preset
TOPOLOGY_PRESET="journalist"

# Global Settings
DEFAULT_TEMPLATE="fedora-40-minimal"
DRY_RUN="false"
VERBOSE="true"
LOG_FILE="/var/log/qubes-sdp-setup.log"

# Backup Configuration (IMPORTANT for journalists)
AUTO_BACKUP="true"
BACKUP_DEST="dom0:/var/backups/qubes-sdp"
BACKUP_SCHEDULE="0 2 * * *"  # Daily at 2 AM
BACKUP_QUBES="vault,work"
BACKUP_COMPRESSION="true"

# Work Qube - For research and writing
ENABLE_WORK="true"
WORK_NAME="work"
WORK_LABEL="green"
WORK_MEMORY="2048"
WORK_NETVM="sys-firewall"
WORK_FIREWALL_POLICY="custom"
WORK_ALLOWED_PORTS="tcp:80,tcp:443,udp:53"  # HTTP, HTTPS, DNS only
WORK_PACKAGES="vim thunderbird"
WORK_AUTOSTART="false"

# Vault Qube - Air-gapped source materials and encryption keys
ENABLE_VAULT="true"
VAULT_NAME="vault"
VAULT_LABEL="black"
VAULT_MEMORY="1024"
VAULT_NETVM=""  # NO NETWORK - critical for security
VAULT_PACKAGES="vim keepassxc"
VAULT_AUTOSTART="false"

# Anon Qube - Anonymous communications
ENABLE_ANON="true"
ANON_NAME="anon"
ANON_LABEL="purple"
ANON_MEMORY="1024"
ANON_NETVM="sys-whonix"  # Uses Tor
ANON_NETVM_FALLBACK="sys-firewall"
ANON_PACKAGES="vim"
ANON_AUTOSTART="false"

# Untrusted Qube - For risky links and unknown files
ENABLE_UNTRUSTED="true"
UNTRUSTED_NAME="untrusted"
UNTRUSTED_LABEL="red"
UNTRUSTED_MEMORY="1024"
UNTRUSTED_NETVM="sys-firewall"
UNTRUSTED_IS_DISPVM_TEMPLATE="true"
UNTRUSTED_PACKAGES="vim"

# Split-GPG - Encrypted communications with sources
ENABLE_SPLIT_GPG="true"
SPLIT_GPG_BACKEND="vault"
SPLIT_GPG_CLIENTS="work"

# Qrexec Policies
ENABLE_QREXEC_POLICIES="true"
ALLOW_WORK_TO_VAULT_COPY="true"  # Store documents in vault
ALLOW_UNTRUSTED_TO_WORK_COPY="ask"  # Ask before trusting files
ALLOW_WORK_VAULT_CLIPBOARD="ask"  # Ask for clipboard operations

# VPN/USB (disabled by default for journalist preset)
ENABLE_VPN="false"
ENABLE_USB="false"
ENABLE_SPLIT_SSH="false"
