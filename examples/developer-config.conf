# Qubes SDP Configuration - Developer Preset
# Optimized for software development with secure key management

TOPOLOGY_PRESET="developer"

DEFAULT_TEMPLATE="fedora-40-minimal"
DRY_RUN="false"
VERBOSE="true"
LOG_FILE="/var/log/qubes-sdp-setup.log"

# Backup Configuration
AUTO_BACKUP="true"
BACKUP_DEST="dom0:/var/backups/qubes-sdp"
BACKUP_SCHEDULE="0 3 * * 0"  # Weekly on Sunday at 3 AM
BACKUP_QUBES="vault,work"
BACKUP_COMPRESSION="true"

# Work Qube - Development environment
ENABLE_WORK="true"
WORK_NAME="work"
WORK_LABEL="green"
WORK_MEMORY="4096"  # More memory for development
WORK_NETVM="sys-firewall"
WORK_FIREWALL_POLICY="custom"
WORK_ALLOWED_PORTS="tcp:80,tcp:443,udp:53,tcp:22,tcp:9418"  # Add SSH and Git
WORK_PACKAGES="vim git curl wget gcc make python3 nodejs docker"
WORK_AUTOSTART="false"

# Vault Qube - SSH keys and credentials
ENABLE_VAULT="true"
VAULT_NAME="vault"
VAULT_LABEL="black"
VAULT_MEMORY="1024"
VAULT_NETVM=""  # NO NETWORK
VAULT_PACKAGES="vim keepassxc"
VAULT_AUTOSTART="false"

# Anon Qube (disabled for developer preset)
ENABLE_ANON="false"

# Untrusted Qube - Testing untrusted code/libraries
ENABLE_UNTRUSTED="true"
UNTRUSTED_NAME="untrusted"
UNTRUSTED_LABEL="red"
UNTRUSTED_MEMORY="2048"  # More memory for testing
UNTRUSTED_NETVM="sys-firewall"
UNTRUSTED_IS_DISPVM_TEMPLATE="true"
UNTRUSTED_PACKAGES="vim"

# Split-SSH - Secure SSH key management
ENABLE_SPLIT_SSH="true"
SPLIT_SSH_BACKEND="vault"
SPLIT_SSH_CLIENTS="work"

# Split-GPG (optional for commit signing)
ENABLE_SPLIT_GPG="true"
SPLIT_GPG_BACKEND="vault"
SPLIT_GPG_CLIENTS="work"

# Qrexec Policies
ENABLE_QREXEC_POLICIES="true"
ALLOW_WORK_TO_VAULT_COPY="true"
ALLOW_UNTRUSTED_TO_WORK_COPY="ask"
ALLOW_WORK_VAULT_CLIPBOARD="ask"

# VPN/USB
ENABLE_VPN="false"
ENABLE_USB="false"
